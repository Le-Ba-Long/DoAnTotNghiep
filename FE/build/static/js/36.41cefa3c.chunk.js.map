{"version":3,"sources":["app/views/StatisticReport/StatisticReportService.js","app/views/StatisticReport/StatisticReport.jsx","../node_modules/@mui/icons-material/Loop.js"],"names":["API_PATH","API","API_PATH3","StatisticReport","useState","listPersonnelChangeReport","setListPersonnelChangeReport","listEmployeeAllocationRatioByDepartment","setListEmployeeAllocationRatioByDepartment","loading1","setLoading1","loading2","setLoading2","useEffect","updatePageData1","updatePageData2","axios","get","then","res","data","statusCode","newArray","map","item","obj","name","value","forEach","val","i","toast","warning","catch","err","error","Box","style","margin","routeSegments","path","display","justifyContent","IconButton","color","onClick","title","columns","field","render","rowData","cellStyle","width","textAlign","thang1","thang2","headerStyle","thang3","thang4","thang5","thang6","thang7","thang8","thang9","thang10","thang11","thang12","options","doubleHorizontalScroll","sorting","search","paging","pageSize","draggable","backgroundColor","colorTable","HEADER","TEXTHEADER","rowStyle","ROW","TEXTROW","isLoading","localization","body","emptyDataSourceMessage","tableData","id","count","_interopRequireDefault","require","Object","defineProperty","exports","default","_createSvgIcon","_jsxRuntime","_default","jsx","d"],"mappings":"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","file":"static/js/36.41cefa3c.chunk.js","sourcesContent":["import axios from 'axios.js';\r\nimport { API } from 'app/constant';\r\n\r\nconst API_PATH = API + '/api/employees/get-personnel-change-report';\r\nconst API_PATH2 = API + '/api/employees/get-monthly-employee-count-report';\r\nconst API_PATH3 = API + '/api/employees/get-employee-allocation-ratio-by-department';\r\n\r\nexport const getPersonnelChangeReport = () => {\r\n  return axios.get(API_PATH);\r\n};\r\n\r\nexport const getMonthlyEmployeeCountReport = () => {\r\n  return axios.get(API_PATH2);\r\n};\r\n\r\nexport const getEmployeeAllocationRatioByDepartment = () => {\r\n  return axios.get(API_PATH3);\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Box, Button } from '@mui/material';\r\nimport { Breadcrumb } from 'app/components';\r\nimport MaterialTable from 'material-table';\r\nimport {\r\n  getPersonnelChangeReport,\r\n  getMonthlyEmployeeCountReport,\r\n  getEmployeeAllocationRatioByDepartment,\r\n} from './StatisticReportService';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport RemoveRedEyeIcon from '@mui/icons-material/RemoveRedEye';\r\nimport { toast } from 'react-toastify';\r\nimport LoopIcon from '@mui/icons-material/Loop';\r\nimport { colorTable } from 'app/constant';\r\n\r\nexport default function StatisticReport() {\r\n  const [listPersonnelChangeReport, setListPersonnelChangeReport] = useState([]);\r\n  const [listEmployeeAllocationRatioByDepartment, setListEmployeeAllocationRatioByDepartment] =\r\n    useState([]);\r\n  const [loading1, setLoading1] = useState(false);\r\n  const [loading2, setLoading2] = useState(false);\r\n\r\n  const columns1 = [\r\n    {\r\n      title: 'Loại',\r\n      field: 'name',\r\n      render: (rowData) => rowData.name,\r\n      cellStyle: {\r\n        width: '5%',\r\n        textAlign: 'center',\r\n      },\r\n    },\r\n    {\r\n      title: 'Tháng 1',\r\n      field: 'thang1',\r\n      render: (rowData) => rowData?.thang1,\r\n      cellStyle: {\r\n        width: '3%',\r\n        textAlign: 'center',\r\n      },\r\n    },\r\n    {\r\n      title: 'Tháng 2',\r\n      field: 'thang2',\r\n      render: (rowData) => rowData?.thang2,\r\n      cellStyle: {\r\n        width: '3%',\r\n        textAlign: 'center',\r\n      },\r\n      headerStyle: {\r\n        textAlign: 'center',\r\n      },\r\n    },\r\n    {\r\n      title: 'Tháng 3',\r\n      field: 'thang3',\r\n      render: (rowData) => rowData?.thang3,\r\n      cellStyle: {\r\n        width: '3%',\r\n        textAlign: 'center',\r\n      },\r\n      headerStyle: {\r\n        textAlign: 'center',\r\n      },\r\n    },\r\n    {\r\n      title: 'Tháng 4',\r\n      field: 'thang4',\r\n      render: (rowData) => rowData?.thang4,\r\n      cellStyle: {\r\n        width: '3%',\r\n        textAlign: 'center',\r\n      },\r\n      headerStyle: {\r\n        textAlign: 'center',\r\n      },\r\n    },\r\n    {\r\n      title: 'Tháng 5',\r\n      field: 'thang5',\r\n      render: (rowData) => rowData?.thang5,\r\n      cellStyle: {\r\n        width: '3%',\r\n        textAlign: 'center',\r\n      },\r\n      headerStyle: {\r\n        textAlign: 'center',\r\n      },\r\n    },\r\n    {\r\n      title: 'Tháng 6',\r\n      field: 'thang6',\r\n      render: (rowData) => rowData?.thang6,\r\n      cellStyle: {\r\n        width: '3%',\r\n        textAlign: 'center',\r\n      },\r\n      headerStyle: {\r\n        textAlign: 'center',\r\n      },\r\n    },\r\n    {\r\n      title: 'Tháng 7',\r\n      field: 'thang7',\r\n      render: (rowData) => rowData?.thang7,\r\n      cellStyle: {\r\n        width: '3%',\r\n        textAlign: 'center',\r\n      },\r\n      headerStyle: {\r\n        textAlign: 'center',\r\n      },\r\n    },\r\n    {\r\n      title: 'Tháng 8',\r\n      field: 'thang8',\r\n      render: (rowData) => rowData?.thang8,\r\n      cellStyle: {\r\n        width: '3%',\r\n        textAlign: 'center',\r\n      },\r\n      headerStyle: {\r\n        textAlign: 'center',\r\n      },\r\n    },\r\n    {\r\n      title: 'Tháng 9',\r\n      field: 'thang9',\r\n      render: (rowData) => rowData?.thang9,\r\n      cellStyle: {\r\n        width: '3%',\r\n        textAlign: 'center',\r\n      },\r\n      headerStyle: {\r\n        textAlign: 'center',\r\n      },\r\n    },\r\n    {\r\n      title: 'Tháng 10',\r\n      field: 'thang10',\r\n      render: (rowData) => rowData?.thang10,\r\n      cellStyle: {\r\n        width: '3%',\r\n        textAlign: 'center',\r\n      },\r\n      headerStyle: {\r\n        textAlign: 'center',\r\n      },\r\n    },\r\n    {\r\n      title: 'Tháng 11',\r\n      field: 'thang11',\r\n      render: (rowData) => rowData?.thang11,\r\n      cellStyle: {\r\n        width: '3%',\r\n        textAlign: 'center',\r\n      },\r\n      headerStyle: {\r\n        textAlign: 'center',\r\n      },\r\n    },\r\n    {\r\n      title: 'Tháng 12',\r\n      field: 'thang12',\r\n      render: (rowData) => rowData?.thang12,\r\n      cellStyle: {\r\n        width: '3%',\r\n        textAlign: 'center',\r\n      },\r\n      headerStyle: {\r\n        textAlign: 'center',\r\n      },\r\n    },\r\n  ];\r\n\r\n  const columns2 = [\r\n    {\r\n      title: 'STT',\r\n      field: 'stt',\r\n      render: (rowData) => rowData.tableData.id + 1,\r\n      cellStyle: {\r\n        width: '5%',\r\n        textAlign: 'center',\r\n      },\r\n    },\r\n    {\r\n      title: 'Tên phòng ban',\r\n      field: 'name',\r\n      render: (rowData) => rowData.name,\r\n      headerStyle: {\r\n        textAlign: 'left',\r\n      },\r\n      cellStyle: {\r\n        width: '20%',\r\n        textAlign: 'left',\r\n      },\r\n    },\r\n    {\r\n      title: 'Số lượng',\r\n      field: 'count',\r\n      render: (rowData) => rowData.count,\r\n      cellStyle: {\r\n        width: '15%',\r\n        textAlign: 'center',\r\n      },\r\n    },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    setLoading1(true);\r\n    setLoading2(true);\r\n    updatePageData1();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (loading1) {\r\n      updatePageData1();\r\n    }\r\n  }, [loading1]);\r\n\r\n  useEffect(() => {\r\n    if (loading2) {\r\n      updatePageData2();\r\n    }\r\n  }, [loading2]);\r\n\r\n  const updatePageData1 = () => {\r\n    getPersonnelChangeReport()\r\n      .then((res) => {\r\n        if (res.data.statusCode === 200) {\r\n          setLoading1(false);\r\n          const newArray = res.data?.data.map((item) => {\r\n            const obj = {\r\n              name: item.name,\r\n            };\r\n            item.value.forEach((val, i) => {\r\n              obj[`thang${i + 1}`] = val;\r\n            });\r\n            return obj;\r\n          });\r\n          setListPersonnelChangeReport(newArray);\r\n        } else {\r\n          setLoading1(false);\r\n          toast.warning('Lỗi xác thực!');\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        toast.error('Có lỗi xảy ra!');\r\n        setLoading1(false);\r\n      });\r\n  };\r\n\r\n  const updatePageData2 = () => {\r\n    getEmployeeAllocationRatioByDepartment()\r\n      .then((res) => {\r\n        if (res.data.statusCode === 200) {\r\n          setLoading2(false);\r\n          setListEmployeeAllocationRatioByDepartment(res.data.data);\r\n        } else {\r\n          setLoading2(false);\r\n          toast.warning('Lỗi xác thực!');\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        toast.error('Có lỗi xảy ra!');\r\n        setLoading2(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Box style={{ margin: 20 }}>\r\n        <Breadcrumb\r\n          routeSegments={[{ name: 'Quản lý', path: '/manage' }, { name: 'Báo cáo thống kê' }]}\r\n        />\r\n        <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n          <IconButton\r\n            color=\"primary\"\r\n            onClick={() => {\r\n              setLoading1(true);\r\n            }}\r\n          >\r\n            <LoopIcon />\r\n          </IconButton>\r\n        </div>\r\n        <div>\r\n          <MaterialTable\r\n            title=\"Biến Động Nhân Sự Năm 2023\"\r\n            columns={columns1}\r\n            data={listPersonnelChangeReport}\r\n            options={{\r\n              doubleHorizontalScroll: false,\r\n              sorting: false,\r\n              search: false,\r\n              paging: false,\r\n              pageSize: 2,\r\n              draggable: false,\r\n              headerStyle: {\r\n                textAlign: 'center',\r\n                backgroundColor: colorTable.HEADER,\r\n                color: colorTable.TEXTHEADER,\r\n              },\r\n              rowStyle: {\r\n                backgroundColor: colorTable.ROW,\r\n                color: colorTable.TEXTROW,\r\n              },\r\n            }}\r\n            isLoading={loading1}\r\n            localization={{\r\n              body: { emptyDataSourceMessage: 'Không có bản ghi nào' },\r\n            }}\r\n          />\r\n        </div>\r\n        <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n          <IconButton\r\n            color=\"primary\"\r\n            onClick={() => {\r\n              setLoading2(true);\r\n            }}\r\n          >\r\n            <LoopIcon />\r\n          </IconButton>\r\n        </div>\r\n        <div>\r\n          <MaterialTable\r\n            title=\"Nhân Sự Phân Bổ Theo Các Phòng Ban Năm 2023\"\r\n            columns={columns2}\r\n            data={listEmployeeAllocationRatioByDepartment}\r\n            options={{\r\n              doubleHorizontalScroll: false,\r\n              sorting: false,\r\n              search: false,\r\n              paging: false,\r\n              pageSize: 2,\r\n              draggable: false,\r\n              headerStyle: {\r\n                textAlign: 'center',\r\n                backgroundColor: colorTable.HEADER,\r\n                color: colorTable.TEXTHEADER,\r\n              },\r\n              rowStyle: {\r\n                backgroundColor: colorTable.ROW,\r\n                color: colorTable.TEXTROW,\r\n              },\r\n            }}\r\n            isLoading={loading2}\r\n            localization={{\r\n              body: { emptyDataSourceMessage: 'Không có bản ghi nào' },\r\n            }}\r\n          />\r\n        </div>\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z\"\n}), 'Loop');\n\nexports.default = _default;"],"sourceRoot":""}